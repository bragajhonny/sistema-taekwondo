<!DOCTYPE HTML>
<html>
	<head>
		<title>CT Gerivaldo Silva</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		
	</head>

	<body class="is-preload">
		<div id="wrapper">
			<header id="header">
				<div class="inner">
					<!-- Logo -->
					<a href="index.html" class="logo">
						<span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">CT Gerivaldo Silva</span>
					</a>
				</div>
			</header>

			<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<section>
						<h2>Login</h2>
						<form onsubmit="return false;">
							<div class="fields">
								<div class="field half">
									<input type="email" id="email" placeholder="Digite seu e-mail" />
								</div>
								<div class="field half">
									<input type="password" id="senha" placeholder="Digite sua senha" />
								</div>
							</div>
							<ul class="actions">
								<li><input type="button" value="Login" class="primary" onclick="login()" /></li>
								<li>Não tem uma conta? Faça seu <a href="registro.html">cadastro aqui.</a></li>
							</ul>
						</form>
					</section>
				</div>
			</footer>
		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>


<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbzz7NHMWz9BeYTN7hiLVwenIn128u-ukOhPCybySnvl4j3zngL8Qts48QKHkG3TRuWU0w/exec';

function login() {
  const email = document.getElementById('email').value;
  const senha = document.getElementById('senha').value;

  if (!email || !senha) {
    alert('Preencha email e senha');
    return;
  }

  fetch(API_URL, {
  method: 'POST',
	  const formData = new FormData();
formData.append('acao', 'login');
formData.append('email', email);
formData.append('senha', senha);

fetch(API_URL, {
  method: 'POST',
  body: formData
})
.then(res => res.text())
.then(texto => {
  const data = JSON.parse(texto);

  if (data.status === 'sucesso') {
    localStorage.setItem('usuario', JSON.stringify(data.dados));

    if (data.dados.tipo === 'professor') {
      window.location.href = 'professor.html';
    } else {
      window.location.href = 'aluno.html';
    }
  } else {
    alert(data.msg);
  }
})
.catch(err => {
  console.error(err);
  alert('Erro ao conectar com o servidor');
});

})
.then(res => res.text())
.then(texto => {
  const data = JSON.parse(texto);

    if (data.status === 'sucesso') {
      localStorage.setItem('usuario', JSON.stringify(data.dados));

      if (data.dados.tipo === 'professor') {
        window.location.href = 'professor.html';
      } else {
        window.location.href = 'aluno.html';
      }
    } else {
      alert(data.msg);
    }
  })
  .catch(err => {
    console.error(err);
    alert('Erro ao conectar com o servidor');
  });
}
</script>



		
<!-- <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDTcmFtCpgb-krAJ6OniJSXIXnkoxGzWF4",
      authDomain: "sistema-taekwondo-1.firebaseapp.com",
      projectId: "sistema-taekwondo-1",
      messagingSenderId: "635745416768",
      appId: "1:635745416768:web:58d23eca722878f047d1a5"
    };

    firebase.initializeApp(firebaseConfig);

    const auth = firebase.auth();
    const db = firebase.firestore();

    function login() {
      const email = document.getElementById("email").value.trim();
      const senha = document.getElementById("senha").value.trim();

      if (!email || !senha) {
        alert("Preencha email e senha");
        return;
      }

      auth.signInWithEmailAndPassword(email, senha)
        .then(cred => {
          return db.collection("alunos").doc(cred.user.uid).get();
        })
        .then(doc => {
          if (!doc.exists) {
            alert("Perfil não encontrado");
            auth.signOut();
            return;
          }

          const dados = doc.data();

          if (dados.perfil === "professor") {
            window.location.href = "professor.html";
          } else {
            window.location.href = "aluno.html";
          }
        })
        .catch(err => {
          console.error(err);
          alert("Email ou senha inválidos");
        });
    }
  </script> -->

	</body>
</html>








